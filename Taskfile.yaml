# https://taskfile.dev

version: '3'

tasks:
  build:
    cmds:
      - go build -ldflags "-X github.com/noqqe/veilig/src/serra.Version=`git describe --tags`"  -v veilig.go
    sources:
      - "src/veilig/**/*.go"
      - "veilig.go"
    generates:
      - "./veilig"

  release:
    interactive: true 
    cmds:
      - git tag $(read)
      - git push --tags
      - goreleaser release --rm-dist

  default:
    cmds:
      - task: build

